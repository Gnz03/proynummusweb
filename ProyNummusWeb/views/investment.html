<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <style>
    @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@200;400&display=swap");
* {
box-sizing: border-box;
}
body {
background-color: #b8c6db;
background-image: linear-gradient(315deg, #b8c6db 0%, #f5f7fa 100%);
font-family: "Poppins", sans-serif;
display: flex;
align-items: center;
justify-content: center;
height: 100vh;
overflow: hidden;
margin: 0;
}
.quiz-container {
background-color: #fff;
border-radius: 10px;
box-shadow: 0 0 10px 2px rgba(100, 100, 100, 0.1);
width: 800px;

max-width: 95vw;
overflow: hidden;

}
.quiz-header {
padding: 4rem;
}
h2 {
padding: 1rem;
text-align: center;
margin: 0;
}
h3 {
padding: 1rem;
text-align: center;
margin: 0;
}
ul {
list-style-type: none;
padding: 0;
}
ul li {
font-size: 1.2rem;
margin: 1rem 0;
}
ul li label {
cursor: pointer;
}
button {
background-color: #8e44ad;
color: #fff;
border: none;
display: block;
width: 100%;
cursor: pointer;
font-size: 1.1rem;
font-family: inherit;
padding: 1.3rem;


}
button:hover {
background-color: #732d91;
}
button:focus {
outline: none;
background-color: #5e3370;
}
.progress-container {
            height: 20px;
            width: 100%;
            background: #f3f3f3;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        .progress-bar {
            height: 100%;
            background: #1CBF3B;
            width: 0;
            transition: width 0.4s ease;
        }
        .back-button {
position: absolute;
top: 10px;
right: 400px; 
background-color: #8e44ad;
color: #fff;
border: none;
cursor: pointer;
font-size: 1rem;
font-family: inherit;
padding: 0.5rem 1rem;
border-radius: 5px;
width: auto;
}
.back-button:hover {
background-color: #732d91;
}
.back-button:focus {
outline: none;
background-color: #5e3370;
}
    </style>
    <title>Inversión</title>
</head>
<body>
    <button class="back-button" onclick="goBack()">Regresar</button>
    <div class="quiz-container" id="quiz">
        <div class="quiz-header">
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
        <h2 id="question">Question is loading...</h2>
        <ul>
        <li>
        <input type="radio" name="answer" id="a" class="answer" />
        <label for="a" id="a_text">Answer...</label>
        </li>
        <li>
        <input type="radio" name="answer" id="b" class="answer" />
        <label for="b" id="b_text">Answer...</label>
        </li>
        <li>
        <input type="radio" name="answer" id="c" class="answer" />
        <label for="c" id="c_text">Answer...</label>
        </li>
        <li>
        <input type="radio" name="answer" id="d" class="answer" />
        <label for="d" id="d_text">Answer...</label>
        </li>
        </ul>
        </div>
        <button id="submit">Enviar</button>
        </div>

        <script>
            const quizData = [
{
question: "¿Cuál es la diferencia entre invertir y ahorrar, y por qué es importante considerar ambos en tu plan financiero?",
a: " Ahorrar implica invertir en bienes raíces, mientras que invertir es guardar dinero en una cuenta de ahorros.",
b: "Ahorrar es solo para emergencias, mientras que invertir es para gastos diarios",
c: "Ahorrar implica gastar menos cada mes, mientras que invertir no tiene riesgo alguno.",
d: "Ahorrar implica reservar dinero para necesidades futuras, mientras que invertir implica utilizar dinero para obtener ganancias a largo plazo, ambos son importantes para la seguridad y el crecimiento financiero.",
correct: "d",
},
{
question: "¿Qué son las acciones y cómo puedes empezar a invertir en ellas?",
a: " Las acciones son partes de propiedad en empresas; puedes empezar a invertir investigando, abriendo una cuenta de corretaje y comprando acciones.",
b: "Las acciones son cuentas de ahorro especiales; puedes empezar a invertir solicitando un préstamo y comprando bonos.",
c: "Las acciones son certificados de depósito a largo plazo; puedes empezar a invertir guardando dinero en una cuenta bancaria y esperando que los intereses suban.",
d: "Las acciones son herramientas de ahorro para emergencias; puedes empezar a invertir comprando productos en el mercado local y revendiendo a un precio más alto.",
correct: "a",
},
{
question: "¿Cómo afecta la inflación a las inversiones a largo plazo y qué estrategias puedes usar para proteger tus inversiones?",
a: "La inflación no tiene ningún impacto en las inversiones a largo plazo; para proteger tus inversiones, invierte únicamente en cuentas de ahorro.",
b: "La inflación aumenta el valor del dinero con el tiempo; para proteger tus inversiones, compra solo bienes raíces.",
c: "La inflación solo afecta a los gastos diarios, no a las inversiones a largo plazo; para proteger tus inversiones, guarda todo tu dinero en efectivo.",
d: "La inflación reduce el valor del dinero con el tiempo; para proteger tus inversiones, considera activos que crezcan con la inflación y bonos indexados.",
correct: "d",
},
{
question: "¿Cuál es la diferencia entre la inversión activa y pasiva, y cuáles son las ventajas y desventajas de cada enfoque?",
a: "La inversión activa implica seleccionar individualmente acciones para superar el mercado, mientras que la inversión pasiva sigue índices; la activa tiene potencial de mayores rendimientos, pero con mayores costos y riesgos.",
b: "La inversión activa se enfoca en comprar bienes raíces, mientras que la inversión pasiva se centra en ahorrar dinero en cuentas bancarias; la activa es más segura pero menos rentable.",
c: "La inversión activa implica mantener dinero en efectivo, mientras que la inversión pasiva significa invertir en criptomonedas; la activa tiene menos riesgo y más liquidez.",
d: "La inversión activa se basa en diversificar en muchos sectores diferentes, mientras que la inversión pasiva se concentra en un solo sector; la activa requiere menos seguimiento y es más predecible.",
correct: "a",
},
{
question: "¿Cómo pueden los cambios en las tasas de interés afectar el valor de tus inversiones en bonos?",
a: "Las tasas de interés en aumento pueden reducir el valor de los bonos existentes, mientras que las tasas más bajas pueden aumentar su valor; gestiona el riesgo con diversificación y duración de bonos.",
b: "Las tasas de interés en aumento siempre aumentan el valor de los bonos existentes, mientras que las tasas más bajas siempre reducen su valor; no hay necesidad de gestionar el riesgo.",
c: "Los cambios en las tasas de interés no afectan el valor de los bonos; para proteger tus inversiones, mantén siempre los mismos bonos sin importar las tasas.",
d: "Las tasas de interés en aumento no tienen ningún efecto en los bonos a largo plazo, pero aumentan el valor de los bonos a corto plazo; diversificación no es necesaria en esta estrategia.",
correct: "a",
},
{
question: "¿Qué impacto tienen los eventos económicos y políticos globales en los mercados financieros y tus inversiones?",
a: " Los eventos globales siempre mejoran el rendimiento de las inversiones, sin importar su naturaleza; no es necesario gestionar el riesgo.",
b: "Los eventos globales pueden causar volatilidad en los mercados, afectando la confianza de los inversores, la estabilidad de las monedas y las políticas regulatorias; gestiona el riesgo con diversificación y seguimiento de noticias.",
c: " Los eventos económicos y políticos no tienen ningún impacto en los mercados financieros; es seguro mantener una estrategia de inversión sin cambios.",
d: "Los eventos globales solo afectan a las inversiones a corto plazo y no tienen impacto en las inversiones a largo plazo; no es necesario diversificar las inversiones.",
correct: "b",
},
{
question: "¿Cómo puedes implementar una estrategia de inversión basada en el ciclo económico para maximizar tus rendimientos?",
a: "Mantén siempre el mismo portafolio sin importar las fases del ciclo económico; invierte únicamente en acciones tecnológicas.",
b: "Ajusta tu portafolio según las fases del ciclo económico; invierte en activos defensivos durante la expansión y en activos cíclicos durante la contracción.",
c: "Ajusta tu portafolio según las fases del ciclo económico; invierte en activos cíclicos durante la expansión y en activos defensivos durante la contracción.",
d: "Ignora las fases del ciclo económico y enfócate solo en la diversificación geográfica; invierte en mercados internacionales sin considerar el ciclo económico.",
correct: "c",
},
{
question: "¿Qué estrategias avanzadas puedes usar para minimizar las obligaciones fiscales asociadas con tus inversiones?",
a: "Evita invertir en cuentas de retiro y enfócate solo en inversiones a corto plazo para minimizar las obligaciones fiscales.",
b: "Ignora las oportunidades de donaciones caritativas y evita la planificación de distribución de activos para simplificar tu estrategia fiscal.",
c: "Mantén todas tus inversiones en efectivo y evita invertir en activos que generen ingresos para reducir la carga tributaria.",
d: "Utiliza cosecha de pérdidas fiscales, cuentas de retiro ventajosas, planificación de distribución de activos, donaciones caritativas y estructuras de planificación patrimonial para reducir la carga tributaria.",
correct: "d",
},
];
const quiz = document.getElementById("quiz");
const answerElements = document.querySelectorAll(".answer");
const questionElement = document.getElementById("question");
const a_text = document.getElementById("a_text");
const b_text = document.getElementById("b_text");
const c_text = document.getElementById("c_text");
const d_text = document.getElementById("d_text");
const submitButton = document.getElementById("submit");
const progressBar = document.getElementById("progress-bar");
let currentQuiz = 0;
let score = 0;
const deselectAnswers = () => {
answerElements.forEach((answer) => (answer.checked = false));
};
const getSelected = () => {
let answer;
answerElements.forEach((answerElement) => {
if (answerElement.checked) answer = answerElement.id;
});
return answer;
};
const loadQuiz = () => {
deselectAnswers();
const currentQuizData = quizData[currentQuiz];
questionElement.innerText = currentQuizData.question;
a_text.innerText = currentQuizData.a;
b_text.innerText = currentQuizData.b;
c_text.innerText = currentQuizData.c;
d_text.innerText = currentQuizData.d;
updateProgressBar();

};
const updateProgressBar = () => {
            const progress = ((currentQuiz ) / quizData.length) * 100;
            progressBar.style.width = `${progress}%`;
        };
loadQuiz();

submitButton.addEventListener("click", async () => {
            const answer = getSelected();
            if (answer) {
                if (answer === quizData[currentQuiz].correct) score++;
                currentQuiz++;
                if (currentQuiz < quizData.length) loadQuiz();
                else {
                    let level;
                    if (score <= 2) level = "basico";
                    else if (score <= 4) level = "conocedor";
                    else if (score <= 6) level = "conversador";
                    else level = "experto";
                        // Obtener el ID de usuario del localStorage
            const userId = localStorage.getItem('userId');
            console.log("ID de usuario:", userId);

            if (!userId) {
                console.error('Error: ID de usuario no encontrado en localStorage');
                return;
            }

            const actualizarNivelUsuario = async (userId, nuevoNivel) => {
                        try {
                            const response = await fetch('/actualizar-nivel', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json'
                                },
                                body: JSON.stringify({ userId, nuevoNivel })
                            });

                            if (response.ok) {
                                const resultado = await response.text();
                                console.log('Respuesta del servidor:', resultado);

                                 // Guardar el nuevo nivel en localStorage
                                localStorage.setItem('userLevel', nuevoNivel);
                                return true;  // Indica éxito
                            } else {
                                console.error('Error al actualizar el nivel de usuario:', response.statusText);
                                return false;  // Indica fallo
                            }
                        } catch (error) {
                            console.error('Error al procesar la solicitud:', error);
                            return false;  // Indica fallo
                        }
                    };
                    
                    // Actualizar el nivel del usuario en la base de datos
                    const nivelActualizado = await actualizarNivelUsuario(userId, level);

                    if (nivelActualizado) {
                        console.log('Nivel de usuario actualizado correctamente en la base de datos.');
                        quiz.innerHTML = `
                <h2>Respondiste ${score}/${quizData.length} preguntas correctamente</h2>
                <h3>Tu nivel es: ${level}</h3>
                <button onclick="window.location.href='/modulos.html'">Ir a los módulos</button>
            `;
                    } else {
                        console.error('Error al actualizar el nivel del usuario en la base de datos.');
                    }
                    
        }
    }
});
function goBack() {
            window.history.back();
        }
        </script>
</body>
</html>